console.clear();

console.log("\n");

// Import the CommonJS bundle generated by Rollup
const ObjectDataValidator = require('./dist/bundle.cjs.js');

const data = {

    accidents: [
        {
            hadInjuries: 'Yes',
            injuryDescription: 'Injuries description here',
            injuryDate: '01-12-1998'
        }
    ]
};

// Generate a regex rule for alpha numeric characters only

const regex = "^(?=.*[a-zA-Z])(?=.*[0-9])[A-Za-z0-9]+$";

const rules = [
    {
        field_name: 'accidents.*.injuryDate',
        field_label: 'Injury Date',
        rules: [
            {
                name: 'required_if_target_not_equals',
                data: {
                    target_field: 'accidents.*.hadInjuries',
                    value : 'No'
                },
                message: '{field_label} is required if you had injuries @ Accident Form #{index}'
            },
            {
                name: 'date_string',
                data : {
                    format : `dd-MM-yyyy`
                }
            }
        ]

    }
];

// Create an instance of your class
const instance = new ObjectDataValidator({
    data: data,
    rules: rules
});

// Call a method on the instance to test it
console.log(instance.validate());

console.log("\n");